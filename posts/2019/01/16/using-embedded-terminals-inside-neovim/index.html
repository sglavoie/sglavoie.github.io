<!DOCTYPE html>
<html lang="en">
<head>
          <title>Using Embedded Terminals Inside&nbsp;Neovim | sglavoie.com</title>
        <link href="https://www.sglavoie.com/feeds/sglavoie.rss.xml" type="application/rss+xml" rel="alternate" title="sglavoie.com Full RSS Feed" />

        <!-- Favicon -->
        <link rel="apple-touch-icon" sizes="180x180" href="/theme/images/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/theme/images/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/theme/images/favicon-16x16.png">
        <link rel="manifest" href="/theme/images/site.webmanifest">
        <link rel="mask-icon" href="/theme/images/safari-pinned-tab.svg" color="#5bbad5">
        <link rel="shortcut icon" href="/theme/images/favicon.ico">
        <meta name="msapplication-TileColor" content="#2d89ef">
        <meta name="msapplication-TileImage" content="/theme/images/mstile-144x144.png">
        <meta name="msapplication-config" content="/theme/images/browserconfig.xml">
        <meta name="theme-color" content="#000000">
        <meta name="msapplication-config" content="/theme/images/browserconfig.xml">
        <meta name="theme-color" content="#000000">


        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta name="Description" content="Provide useful information while documenting my journey as a learner in technology-related matters. Tech journal with the specific goal of explaining the challenges that I will inevitably face while trying to become a better student and most importantly, it will be a reference to the solutions that I found along the way so that it can benefit others too.">

        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">


        <!-- Font Awesome Icons -->
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">

        <!-- Custom CSS -->
        <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
        <link href='/theme/css/base.css?cache_id=e43f810b881430c2d303d3e0516d4f80' rel='stylesheet' type='text/css'>
        <link href='/theme/css/pygment.css?cache_id=503914e4e79f274778eabccca9bcd1f9' rel='stylesheet' type='text/css'>





    <meta name="tags" content="neovim" />
    <meta name="tags" content="productivity" />
    <meta name="tags" content="terminal" />

</head>

<body id="index" class="home">

<nav id="bg-darker" class="navbar navbar-expand-lg navbar-dark">
      <a class="brand-link" href="/">
          <img class="brand-logo hover-img" src="/theme/images/sglavoie.svg" alt="sglavoie.svg">
      </a>
  <button class="navbar-toggler hover-img" type="button" data-toggle="collapse" data-target="#sglavoie-menu" aria-controls="sglavoie-menu" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
    Main Menu
  </button>

  <div class="collapse navbar-collapse" id="sglavoie-menu">
      <div class="to-the-right">
          <ul class="navbar-nav mr-auto mt-2 mt-lg-0">

    <li class="nav-item ">
        <a class="nav-link " href="/index.html"><i class="fas fa-home"></i> home</a>
    </li>
    <li class="nav-item ">
        <a class="nav-link " href="/tags.html"><i class="fas fa-hashtag"></i> tags</a>
    </li>
    <li class="nav-item ">
        <a class="nav-link " href="/learning-progress.html"><i class="fas fa-graduation-cap"></i> learning</a>
    </li>
    <li class="nav-item ">
        <a class="nav-link " href="/about.html"><i class="fas fa-info"></i> about</a>
    </li>
          </ul>
      </div>
  </div>
</nav>

<nav id="menu" class="navbar navbar-expand-lg navbar-dark">

  <button class="navbar-toggler hover-img" type="button" data-toggle="collapse" data-target="#sglavoie-menu-second" aria-controls="sglavoie-menu-second" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
    Categories
  </button>

  <div class="collapse navbar-collapse" id="sglavoie-menu-second">
      <div id="menu-categories-legend-id" class="menu-categories-legend">
          <a href="/categories.html"><img class="img-categories" src="/theme/images/categories.svg" alt="Categories"></a>
      </div>
          <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
              <li class="nav-item active">
              </li>

              <li class="nav-item">
            <a class="lowercase-title always-white nav-link-smaller" href="https://www.sglavoie.com/category/automation.html">automation</a>
              </li>

              <li class="nav-item">
            <a class="lowercase-title always-white nav-link-smaller" href="https://www.sglavoie.com/category/tips-and-tricks.html">tips-and-tricks</a>
              </li>

              <li class="nav-item">
            <a class="lowercase-title always-white nav-link-smaller" href="https://www.sglavoie.com/category/tools.html">tools</a>
              </li>

              <li class="nav-item">
            <a class="lowercase-title always-white nav-link-smaller" href="https://www.sglavoie.com/category/workflow.html">workflow</a>
              </li>
          </ul>
  </div>
</nav>
        <!-- /#menu -->


    <section id="content" class="jumbotron body">
        <header>
            <h2 class="display-4">
                <a href="https://www.sglavoie.com/posts/2019/01/16/using-embedded-terminals-inside-neovim/" rel="bookmark"
                    title="Permalink to Using Embedded Terminals Inside Neovim">Using Embedded Terminals Inside&nbsp;Neovim</a></h2>
            
        </header>
        <footer class="post-info">
            <i class="fas fa-calendar-alt"></i> <time class="published" datetime="2019-01-16T17:32:00-06:00">
                January 16, 2019 @ 17:32 CST
            </time>
            <address class="vcard author">
            </address>
            <div class="category">
                <i class="fas fa-tag"></i> Category: <a class="emphasis post-info-space" href="https://www.sglavoie.com/category/tips-and-tricks.html">tips-and-tricks</a>
            </div>
            <div class="tags">
                <i class="fas fa-hashtag"></i> Tags:
                <a class="emphasis post-info-space" href="https://www.sglavoie.com/tag/neovim.html">neovim</a>
                <a class="emphasis post-info-space" href="https://www.sglavoie.com/tag/productivity.html">productivity</a>
                <a class="emphasis post-info-space" href="https://www.sglavoie.com/tag/terminal.html">terminal</a>
            </div>
        </footer><!-- /.post-info -->
  <hr class="my-4">
  <div class="card">
      <div class="card-body entry-content">
          <h2>Terminals <span class="amp">&amp;</span>&nbsp;Neovim</h2>
<p>Terminal buffers are a built-in feature of <code>Neovim</code>. This means that
terminals can be launched inside Neovim just like any other buffer, may
it be a split window, a new tab or an independent buffer. Why is this so
useful? Be prepared to be&nbsp;amazed.</p>
<p><a href="https://www.sglavoie.com/images/posts/0006_using-embedded-terminals-inside-neovim/work_on_article.png"><img src="https://www.sglavoie.com/images/posts/0006_using-embedded-terminals-inside-neovim/work_on_article.png" alt="embedded-terminal" class="max-size-img-post"></a></p>
<p><a href="https://www.sglavoie.com/images/posts/0006_using-embedded-terminals-inside-neovim/terminal_buffers.png"><img src="https://www.sglavoie.com/images/posts/0006_using-embedded-terminals-inside-neovim/terminal_buffers.png" alt="terminal-buffers" class="max-size-img-post"></a></p>
<p>(click to&nbsp;open)</p>
<h3>Seamless integration with Vim&nbsp;commands</h3>
<p>For a start, terminals are not just <em>opened</em> inside Neovim: they are
truly integrated. When you type the letter <code>i</code> in a terminal buffer,
it switches to a new mode, <code>Terminal</code>, where you have access to all
underlying features of a regular Bash terminal, such as <code>CTRL + r</code>
to search, tab completion of commands, <code>CTRL + w</code> to delete a word
backwards or <code>CTRL + u</code> to delete the whole line&nbsp;backwards.</p>
<p>When you escape the <code>Terminal</code> mode, you switch back to <code>Normal</code> mode,
where all Vim commands are available as usual, such as navigation,
search, etc. Where this gets interesting is when you consider that the
terminal is just like any other buffer (except it&#8217;s not <em>modifiable</em>)
and so you can for instance copy its content or paste into it from
different registers. You can split them, view the line number, get
automatic scrolling when output appears in <code>Insert</code> mode, you can switch
back to <code>Normal</code> mode at any time even if a command hasn&#8217;t completed&#8230;
and of course all commands like <code>gt</code> to <strong>g</strong>o to another <strong>t</strong>ab work
as&nbsp;always.</p>
<h3>Terminals get supercharged with the power of&nbsp;Vim</h3>
<p>This is getting exciting (at least for me). Now, having a terminal with
more power is useful in many&nbsp;cases:</p>
<ul>
<li>
<p>A whole terminal session can be saved to another file easily by
copying the desired range (<code>:%y</code> to copy everything, for&nbsp;example).</p>
</li>
<li>
<p>Instead of having to scroll with the mouse, all Vim commands are
available to search and navigate through the buffer: <code>gg</code> to go to the
beginning of the session, <code>G</code> to go to the end, <code>12G</code> to go to line
number <strong>12</strong>, <code>/</code> or <code>?</code> to search forward and backward respectively.
You can even set local or global marks to jump back and forth to precise
lines&nbsp;consistently!</p>
</li>
<li>
<p>It&#8217;s even possible to send commands directly to a specific
terminal or set up a <span class="caps">REPL</span> to execute any code, either a
selection, a line or a range of lines. I don&#8217;t personally
use that feature yet, but I see how useful that can be and
you can too if you watch this <a href="https://thoughtbot.com/upcase/videos/neovim-sending-commands-to-a-
terminal-buffer">screencast presented by Drew
Neil</a> <i class="fas fa-tv"></i> on
<a href="https://thoughtbot.com">thoughtbot.com</a>.</p>
</li>
<li>
<p>If the terminal is opened in <code>Normal</code> mode, the cursor and the current
position are kept intact even though new output could appear, such as
would be the case if you are running a server in the background or
waiting for a system update to finish. This is especially nice for
instance if you are trying to debug a web application: you can leave the
cursor exactly where you would like to keep reading the output and never
get lost&#8230; Plus you have the ability to easily move around, search and
copy like a&nbsp;ninja!</p>
</li>
</ul>
<h3>The workflow is more compact and&nbsp;centralized</h3>
<p>Because the terminals are running with one Neovim instance, you get
everything in the same place, which is usually how you need to access
your work anyway. If for some reasons you need to have multiple
instances of Neovim running, this is possible too and in that situation
you could simply split them into different&nbsp;workspaces.</p>
<p>Because everything is launched with Neovim, every terminal left open
will also be exited when you close Neovim, shutting down any server
or quitting any background interaction going on in the terminals. I
have found that this behaviour is what I expect pretty much all the
time because the idea of having a terminal inside a working session
of Neovim is to work on something related, so it makes sense to close
everything that&#8217;s to do with a single project or task when you exit the
text editor. No need for <code>CTRL + d</code> or <code>exit</code> anymore <i class="fas
fa-smile-beam"></i>!</p>
<hr>
<h2>Terminal settings to&nbsp;consider</h2>
<p>I don&#8217;t use many settings or mappings related to terminals, but I guess
the nicest one is to remap the <code>Escape</code> key because by default, this is
a weird mapping that leads to twisted fingers (<code>&lt;C-\&gt;&lt;C-n&gt;</code>). Here is
what I currently have in my <code>init.vim</code> file (the equivalent of <code>.vimrc</code>
for&nbsp;Neovim):</p>
<div class="highlight"><pre><span></span><span class="k">set</span> termguicolors  <span class="c">&quot; Make colors look better in terminal</span>

<span class="c">&quot; Exit from terminal buffer (Neovim) more easily (remaps Esc key in</span>
<span class="c">&quot; terminal)</span>
tnoremap <span class="p">&lt;</span>C<span class="p">-</span>[<span class="p">&gt;</span> <span class="p">&lt;</span>C<span class="p">-</span>\<span class="p">&gt;&lt;</span>C<span class="p">-</span><span class="k">n</span><span class="p">&gt;</span>

<span class="c">&quot; Open terminal buffer (M stands for the Alt key)</span>
<span class="nb">nnoremap</span> <span class="p">&lt;</span>M<span class="p">-</span><span class="k">t</span><span class="p">&gt;</span> :<span class="k">te</span><span class="p">&lt;</span>CR<span class="p">&gt;</span>

<span class="c">&quot; Switch to terminal buffer automatically (when only one terminal is</span>
<span class="c">&quot; open)</span>
<span class="nb">nnoremap</span> <span class="p">&lt;</span>M<span class="m">-0</span><span class="p">&gt;</span> :<span class="k">b</span> <span class="nb">term</span>:<span class="sr">//</span><span class="p">&lt;</span>CR<span class="p">&gt;</span>

<span class="c">&quot; Move between windows exactly the same way as usual</span>
tnoremap <span class="p">&lt;</span>C<span class="p">-</span><span class="k">j</span><span class="p">&gt;&lt;</span>C<span class="p">-</span><span class="k">k</span><span class="p">&gt;</span> <span class="p">&lt;</span>C<span class="p">-</span>\<span class="p">&gt;&lt;</span>C<span class="p">-</span>N<span class="p">&gt;</span>
tnoremap <span class="p">&lt;</span>C<span class="p">-</span><span class="k">h</span><span class="p">&gt;</span> <span class="p">&lt;</span>C<span class="p">-</span>\<span class="p">&gt;&lt;</span>C<span class="p">-</span>N<span class="p">&gt;&lt;</span>C<span class="p">-</span><span class="k">w</span><span class="p">&gt;</span><span class="k">h</span>
tnoremap <span class="p">&lt;</span>C<span class="p">-</span><span class="k">j</span><span class="p">&gt;</span> <span class="p">&lt;</span>C<span class="p">-</span>\<span class="p">&gt;&lt;</span>C<span class="p">-</span>N<span class="p">&gt;&lt;</span>C<span class="p">-</span><span class="k">w</span><span class="p">&gt;</span><span class="k">j</span>
tnoremap <span class="p">&lt;</span>C<span class="p">-</span><span class="k">k</span><span class="p">&gt;</span> <span class="p">&lt;</span>C<span class="p">-</span>\<span class="p">&gt;&lt;</span>C<span class="p">-</span>N<span class="p">&gt;&lt;</span>C<span class="p">-</span><span class="k">w</span><span class="p">&gt;</span><span class="k">k</span>
tnoremap <span class="p">&lt;</span>C<span class="p">-</span><span class="k">l</span><span class="p">&gt;</span> <span class="p">&lt;</span>C<span class="p">-</span>\<span class="p">&gt;&lt;</span>C<span class="p">-</span>N<span class="p">&gt;&lt;</span>C<span class="p">-</span><span class="k">w</span><span class="p">&gt;</span><span class="k">l</span>
</pre></div>


<hr>
<h2>Conclusion</h2>
<p>This was a quick overview of a feature that I have neglected for some
time but recently realized how well it integrates with my workflow. You
can find some more information by typing <code>:h terminal</code>. If you already
use Neovim, it&#8217;s worth giving it a try! Otherwise, it&#8217;s worth giving
<a href="https://neovim.io/">Neovim</a> a try <i class="fas fa-laugh-wink"></i>.</p>
      </div>
  </div>
        <!-- /.entry-content -->

	<hr>

	<h2 class="display-4"><i class="fas fa-comment-alt"></i> Comments</h2>
<div id="disqus_thread"></div>
<script type="text/javascript">
    // Substitute single quotation mark (') for double (") to allow
    // article's title to contain single quotes.
    var disqus_shortname = "sglavoie"; 
    var disqus_title = "Using Embedded Terminals Inside&nbsp;Neovim";

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


    </section>
        <div class="footer-borders">
            <footer id="contentinfo" class="body bg-border hover-footer-bg">

        <address class="footer-icons">

            <div class="get-in-touch-icons">

            <ul class="social-footer">

        <li><a href="https://github.com/sglavoie"><img src="/theme/images/footer/github.svg" alt="GitHub"></a></li>
        <li><a href="https://www.twitter.com/sgdlavoie"><img src="/theme/images/footer/twitter.svg" alt="Twitter"></a></li>
        <li><a href="https://www.linkedin.com/in/sglavoie"><img src="/theme/images/footer/linkedin.svg" alt="LinkedIn"></a></li>
        <li><a href="https://www.hackerrank.com/sglavoie"><img src="/theme/images/footer/hackerrank.svg" alt="HackerRank"></a></li>
        <li><a href="https://stackoverflow.com/users/story/8787680"><img src="/theme/images/footer/stackoverflow.svg" alt="Stackoverflow"></a></li>

        </div>

      </address>

      <address id="about" class="vcard body">
          Proudly powered by <a href="http://getpelican.com/">Pelican 4.0.1<img class="footer-bottom-icon" src="/theme/images/footer/pelican.svg" alt="Pelican"></a>,
          which takes great advantage of <a href="http://python.org">Python<img class="footer-bottom-icon" src="/theme/images/footer/python.svg" alt="Python"></a> .


      <div id="author-footer">
          <p>Copyleft <span class="copy-left">©</span> 2019 — Sébastien Lavoie 
              <script type="text/javascript" language="javascript">
                  <!--
// Email obfuscator script 2.1 by Tim Williams, University of Arizona
// Random encryption key feature coded by Andrew Moulden
// This code is freeware provided these four comment lines remain intact
// A wizard to generate this code is at http://www.jottings.com/obfuscator/
{ coded = "Efp9ExWfz@EoU9R5Wf.45D"
    key = "RXmOLk0xFelpj9ihYV4PZ5AGDB3wsKdfUn12WHJgvqNIrCytS8EbQa6zuMc7To"
    shift=coded.length
    link=""
    for (i=0; i<coded.length; i++) {
        if (key.indexOf(coded.charAt(i))==-1) {
            ltr = coded.charAt(i)
            link += (ltr)
        }
        else {     
            ltr = (key.indexOf(coded.charAt(i))-shift+key.length) % key.length
            link += (key.charAt(ltr))
        }
    }
    // Adding inline style to 'img' tag as it seems to be more trustworthy inside this script.
    document.write("<a href='mailto:"+link+"'>"+"<img class='footer-bottom-icon' src='/theme/images/footer/email.svg' alt='Email'>"+"</a>")
}
//-->
              </script><noscript>Sorry, you need Javascript on to email me.</noscript>
          </p>
      </div>
                </address>
                
              <div class="version-footer">v0.13.0</div>

                <!-- /#about -->
            </footer>

        </div>
        <!-- /#contentinfo -->

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>


    <!-- Disqus comment counts for each article -->
<script id="dsq-count-scr" src="https://sglavoie.disqus.com/count.js" async></script>
</body>
</html>