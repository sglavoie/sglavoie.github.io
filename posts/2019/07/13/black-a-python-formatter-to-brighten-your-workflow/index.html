<!DOCTYPE html>
<html lang="en">
    <head>
        <link
            rel="stylesheet"
            type="text/css"
            href="https://www.sglavoie.com/theme/css/style.css"
        />
        <link
            rel="stylesheet"
            type="text/css"
            href="https://www.sglavoie.com/theme/css/pygments.css"
        />

        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="author" content="Sébastien Lavoie" />
        <meta
            name="description"
            content="Posts and writings by Sébastien Lavoie. Customization setups and articles on productivity for developers who like minimalism."
        />
        <meta name="title" property="og:title" content="sglavoie.com" />
        <meta property="og:type" content="Website" />
        <meta
            name="image"
            property="og:image"
            content="https://www.sglavoie.com/theme/images/logo_1200x627.png"
        />

         <link
            href="https://www.sglavoie.com/feeds/sglavoie.rss.xml"
            type="application/rss+xml"
            rel="alternate"
            title="sglavoie.com RSS"
        />

        <!-- Favicon -->
        <link
            rel="apple-touch-icon"
            href="/theme/favicon/apple-touch-icon.png"
        />
        <link
            rel="icon"
            type="image/png"
            sizes="32x32"
            href="/theme/favicon/favicon-32x32.png"
        />
        <link
            rel="icon"
            type="image/png"
            sizes="16x16"
            href="/theme/favicon/favicon-16x16.png"
        />
        <link rel="manifest" href="/theme/favicon/site.webmanifest" />
        <link
            rel="mask-icon"
            href="/theme/favicon/safari-pinned-tab.svg"
            color="#5bbad5"
        />
        <link rel="shortcut icon" href="/theme/favicon/favicon.ico" />
        <meta name="msapplication-TileColor" content="#2d89ef" />
        <meta
            name="msapplication-TileImage"
            content="/theme/favicon/mstile-144x144.png"
        />
        <meta
            name="msapplication-config"
            content="/theme/favicon/browserconfig.xml"
        />
        <meta name="theme-color" content="#000000" />
        <meta
            name="msapplication-config"
            content="/theme/favicon/browserconfig.xml"
        />
        <meta name="theme-color" content="#000000" />

      <meta name="keywords" content="neovim, plugin, productivity, terminal, vim">

      <!-- Open graph for social networks -->
      <meta name="og:title" property="og:title" content="Meet Black, a superb Python code formatter that will automatically reformat your code in accordance to PEP-8 standards.">

        <title>sglavoie.com &ndash; Black: A Python Formatter to Brighten Your&nbsp;Workflow</title>

        <!-- Enable tracking of web traffic -->
<script type="text/javascript">
    var _gaq = _gaq || []
    _gaq.push(['_setAccount', 'UA-150998392-1'])
    _gaq.push(['_trackPageview'])
    ;(function () {
        var ga = document.createElement('script')
        ga.type = 'text/javascript'
        ga.async = true
        ga.src =
            ('https:' == document.location.protocol
                ? 'https://ssl'
                : 'http://www') + '.google-analytics.com/ga.js'
        var s = document.getElementsByTagName('script')[0]
        s.parentNode.insertBefore(ga, s)
    })()
</script>
     </head>

    <body>
        <aside>
            <div id="user_meta">
                <a href="https://www.sglavoie.com">
                    <div>
                        <svg
                            width="24.348mm"
                            height="24.348mm"
                            version="1.1"
                            viewBox="0 0 24.348095 24.347754"
                            xmlns="http://www.w3.org/2000/svg"
                            xmlns:cc="http://creativecommons.org/ns#"
                            xmlns:dc="http://purl.org/dc/elements/1.1/"
                            xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
                        >
                            <metadata>
                                <rdf:RDF>
                                    <cc:Work rdf:about="">
                                        <dc:format>image/svg+xml</dc:format>
                                        <dc:type
                                            rdf:resource="http://purl.org/dc/dcmitype/StillImage"
                                        />
                                        <dc:title />
                                    </cc:Work>
                                </rdf:RDF>
                            </metadata>
                            <g transform="translate(81.397 -84.454)">
                                <path
                                    d="m-57.049 105.9v2.9029h-11.173v-2.9029z"
                                    fill="#c0c0c0"
                                >
                                    <animate
                                        attributeName="fill"
                                        values="white;grey;white"
                                        dur="2s"
                                        repeatCount="indefinite"
                                    />
                                </path>
                                <path
                                    d="m-72.272 98.481-9.1246 5.7598v-3.548l5.8658-3.5019v-0.09215l-5.8658-3.5019v-3.548l9.1246 5.7598z"
                                    fill="#c0c0c0"
                                />
                                <path
                                    transform="scale(.26458)"
                                    d="m-273.15 319.2-27.588 14.77 8.498 5.3613 19.09-12.049zm15.309 25.67v44.412h8.8672v-35.635h33.361v-8.7773h-33.783zm25.336 24.66v8.7774h8.0254v10.975h8.8672v-19.752z"
                                    fill="#007bff"
                                />
                            </g>
                        </svg>
                    </div>
                </a>
                <ul>
                      <li><a href="https://www.sglavoie.com/category/automation.html">automation</a></li>
                    <li><a href="https://www.sglavoie.com/category/tips-and-tricks.html">tips-and-tricks</a></li>
                    <li><a href="https://www.sglavoie.com/category/tools.html">tools</a></li>
                    <li><a href="https://www.sglavoie.com/category/workflow.html">workflow</a></li>
                  </ul>
            </div>
        </aside>

        <main>
            <header>
                <p>
                    <a href="https://www.sglavoie.com">Home</a> &brvbar;
                    <a href="https://www.sglavoie.com/archives.html">Archives</a> &brvbar;
                    <a href="https://www.sglavoie.com/tags.html">Tags</a> &brvbar;
                    <a href="https://www.sglavoie.com/learning-progress.html"
                        >Learning Progress</a
                    >
                    &brvbar;
                    <a href="https://www.sglavoie.com/contact.html">Contact</a> &brvbar;
                    <a
                        href="https://drive.google.com/file/d/1t6GdZjC13naJXVGe6RinGowZLfkRzjy_/view"
                        target="_blank"
                        rel="noopener noreferrer"
                        >Resume</a
                    >
                </p>
            </header>

<article>
  <div class="article_title">
    <h1><a href="https://www.sglavoie.com/posts/2019/07/13/black-a-python-formatter-to-brighten-your-workflow/">Black: A Python Formatter to Brighten Your&nbsp;Workflow</a></h1>
  </div>
  <div class="article_readtime">
    <p>Estimated read time: 4 minutes</p>
  </div>
    <nav class="toc">
    <div class="toc">
<ul>
<li><a href="#what-is-black">What is Black?</a></li>
<li><a href="#how-to-use-it">How to use it?</a><ul>
<li><a href="#use-it-from-the-terminal">Use it from the terminal</a></li>
<li><a href="#use-it-with-vim">Use it with Vim</a></li>
</ul>
</li>
<li><a href="#any-example">Any example?</a></li>
<li><a href="#conclusion">Conclusion</a></li>
</ul>
</div>
    </nav>
  <div class="article_text">
    
<hr/>
<h2 id="what-is-black">What is Black?</h2>
<p>From its <a href="https://github.com/python/black">GitHub repository</a>:</p>
<blockquote>
<p>Black is the uncompromising Python code formatter. By using it, you agree to cede control over minutiae of hand-formatting. In return, Black gives you speed, determinism, and freedom from pycodestyle nagging about formatting. You will save time and mental energy for more important matters.</p>
</blockquote>
<p><strong>Black</strong> will take less than ideal code and will automatically reformat it according to the <a href="https://www.python.org/dev/peps/pep-0008/"><span class="caps">PEP</span>-8 style guide</a>. It will take care of many things, including the following (taken in that order from <code>README.md</code> in <strong>Black</strong>‘s repo):</p>
<ul>
<li>Wrapping lines properly by shortening as much as possible single statements;</li>
<li>Break long lines;</li>
<li>Remove superfluous empty lines;</li>
<li>Take care of adding trailing commas where necessary;</li>
<li>Convert single quotes (<code>'</code>) to double quotes (<code>"</code>);</li>
<li>Convert numeric literals to lowercase (<code>0XAB</code> to <code>0xAB</code>);</li>
<li>Superfluous parentheses are removed;</li>
<li>Split call chains on different lines;</li>
<li>Works from the terminal and support many code editor integrations (Emacs, Vim, <span class="caps">VS</span> Code, Sublime, etc.).</li>
</ul>
<p>Now that it’s clear <em>why</em> it can be a good idea to use it, let’s see how it works with Vim and the terminal.</p>
<hr/>
<h2 id="how-to-use-it">How to use it?</h2>
<p>First, we need to install it using Python 3.6.0+:</p>
<div class="highlight"><pre><span></span><code>$ pip install black
</code></pre></div>
<p>That’s it!</p>
<h3 id="use-it-from-the-terminal">Use it from the terminal</h3>
<p>In its simplest invocation, we can use <strong>Black</strong> by specifying a file or a directory by typing:</p>
<div class="highlight"><pre><span></span><code>$ black path_to_file_or_directory
</code></pre></div>
<p>It doesn’t come with many options as its goal is to automatically format code consistently, but you can find out more about this tool in the following way:</p>
<div class="highlight"><pre><span></span><code>$ black --help
</code></pre></div>
<h3 id="use-it-with-vim">Use it with Vim</h3>
<p>Using <strong>Black</strong> as part of your workflow in a code editor is where I believe it really shines, because you can see almost in real-time when you make a formatting mistake, which will help down the road in committing less sins.</p>
<p>Integrating <strong>Black</strong> with Vim or Neovim is quick and painless, adding a simple line in your <code>.vimrc</code> or <code>init.vim</code> file. You can also proceed to do a manual installation without a plugin manager as explained in the GitHub repository.</p>
<p>With <a href="https://github.com/junegunn/vim-plug">vim-plug</a>:</p>
<div class="highlight"><pre><span></span><code>Plug <span class="s1">'python/black'</span>
</code></pre></div>
<p>With <a href="https://github.com/VundleVim/Vundle.vim">Vundle</a>:</p>
<div class="highlight"><pre><span></span><code>Plugin <span class="s1">'python/black'</span>
</code></pre></div>
<p>Once the plugin is installed, it may well be convenient to automatically format Python files when saving the buffer, which can be accomplished by adding the following line to the configuration file:</p>
<div class="highlight"><pre><span></span><code>autocmd <span class="nb">BufWritePre</span> *.<span class="k">py</span> execute <span class="s1">':Black'</span>
</code></pre></div>
<p>By default, <strong>Black</strong> works surprisingly well on its own. I only went ahead and changed the default line length from 88 to 79 characters by also adding this line:</p>
<div class="highlight"><pre><span></span><code><span class="k">let</span> <span class="k">g</span>:black_linelength <span class="p">=</span> <span class="m">79</span>  <span class="c">" default is 88</span>
</code></pre></div>
<p>Finally, it’s worth noting you can update <strong>Black</strong> at any point from the terminal with <code>pip</code> and you can also do it directly from within Vim/Neovim with this command:</p>
<div class="highlight"><pre><span></span><code><span class="p">:</span>BlackUpgrade
</code></pre></div>
<p>Vim will then output something along those lines:</p>
<blockquote>
<p>Upgrading Black with pip…</p>
<p><span class="caps">DONE</span>! You are all set, thanks for waiting</p>
</blockquote>
<h2 id="any-example">Any example?</h2>
<p>Taking a random Python 3.6+ code sample, we could originally have something like this (hopefully not):</p>
<div class="highlight"><pre><span></span><code>    <span class="k">for</span> <span class="n">source</span> <span class="ow">in</span>  <span class="n">data_sources</span> <span class="p">:</span>


        <span class="c1"># Retrieve a list of all matching log files in `source`</span>
        <span class="n">log_files</span><span class="o">=</span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span> <span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="n">source</span><span class="si">}</span><span class="s1">/</span><span class="si">{</span><span class="n">LOG_NAME</span><span class="si">}</span><span class="s1">*'</span> <span class="p">)</span>
        <span class="k">if</span> <span class="n">log_files</span>  <span class="o">==</span>  <span class="p">[</span> <span class="p">]:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'</span><span class="se">\n</span><span class="s1">There is no log file to delete in </span><span class="si">{</span><span class="n">source</span><span class="si">}</span><span class="s1">.'</span><span class="p">)</span>
                <span class="k">continue</span>
        <span class="k">else</span>    <span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Log files in </span><span class="si">{</span><span class="n">source</span><span class="si">}</span><span class="s1">:'</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">log_file</span> <span class="ow">in</span> <span class="n">log_files</span><span class="p">:</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">ARGUMENTS</span><span class="o">.</span><span class="n">remind</span><span class="p">):</span> <span class="n">REMINDER_IS_SET</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="nb">print</span><span class="p">(</span>
                            <span class="n">log_file</span>
                    <span class="p">)</span>
                <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="s1">'</span><span class="se">\n</span><span class="s1">Do you want to delete log files '</span> <span class="s1">'for this source? (y/n) '</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">user_says_yes</span><span class="p">(</span> <span class="n">message</span> <span class="o">=</span> <span class="n">message</span> <span class="p">))</span> <span class="p">:</span>
                    <span class="k">for</span> <span class="n">log_file</span> <span class="ow">in</span> <span class="n">log_files</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">log_file</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span>
                            <span class="s1">'Log files deleted.'</span>
                            <span class="p">)</span>
                    <span class="k">continue</span>
                <span class="k">else</span> <span class="p">:</span> <span class="k">continue</span>
        <span class="nb">print</span><span class="p">(</span> <span class="s1">'Exiting script...'</span> <span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span> <span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div>
<p>Running <strong>Black</strong>, we will get something that’s quite a bit more palatable:</p>
<div class="highlight"><pre><span></span><code>    <span class="k">for</span> <span class="n">source</span> <span class="ow">in</span> <span class="n">data_sources</span><span class="p">:</span>

        <span class="c1"># Retrieve a list of all matching log files in `source`</span>
        <span class="n">log_files</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">source</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">LOG_NAME</span><span class="si">}</span><span class="s2">*"</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">log_files</span> <span class="o">==</span> <span class="p">[]:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2">There is no log file to delete in </span><span class="si">{</span><span class="n">source</span><span class="si">}</span><span class="s2">."</span><span class="p">)</span>
            <span class="k">continue</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Log files in </span><span class="si">{</span><span class="n">source</span><span class="si">}</span><span class="s2">:"</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">log_file</span> <span class="ow">in</span> <span class="n">log_files</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">ARGUMENTS</span><span class="o">.</span><span class="n">remind</span><span class="p">:</span>
                    <span class="n">REMINDER_IS_SET</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">log_file</span><span class="p">)</span>
            <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">"</span><span class="se">\n</span><span class="s2">Do you want to delete log files "</span> <span class="s2">"for this source? (y/n) "</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">user_says_yes</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">log_file</span> <span class="ow">in</span> <span class="n">log_files</span><span class="p">:</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">log_file</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">"Log files deleted."</span><span class="p">)</span>
                <span class="k">continue</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">continue</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"Exiting script..."</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div>
<hr/>
<h2 id="conclusion">Conclusion</h2>
<p>I think the results speak for themselves: enforcing a style with a tool like <strong>Black</strong> is definitely useful to avoid arguments about conflicting coding styles. It lets you focus on what matters instead: being productive while providing value to the world.</p>
  </div>
  <div class="article_meta">
    <p>Posted on: Sat 13 July 2019</p>
    <p>Category: <a href="https://www.sglavoie.com/category/workflow.html">workflow</a>
 &ndash; Tags:
      <a href="https://www.sglavoie.com/tag/neovim.html">neovim</a>,      <a href="https://www.sglavoie.com/tag/plugin.html">plugin</a>,      <a href="https://www.sglavoie.com/tag/productivity.html">productivity</a>,      <a href="https://www.sglavoie.com/tag/terminal.html">terminal</a>,      <a href="https://www.sglavoie.com/tag/vim.html">vim</a>    </p>
  </div>

  <div id="article_comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_identifier = "posts/2019/07/13/black-a-python-formatter-to-brighten-your-workflow/";
        (function() {
             var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
             dsq.src = '//sglavoie.disqus.com/embed.js';
             (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
         })();
    </script>
  </div>

</article>
  
            <div id="ending_message">
                <p>
                    &copy; Sébastien Lavoie. Built with
                    <a
                        href="https://www.python.org/"
                        target="_blank"
                        rel="noopener noreferrer"
                        >Python</a
                    >
                    using
                    <a
                        href="http://getpelican.com"
                        target="_blank"
                        rel="noopener noreferrer"
                        >Pelican</a
                    >
                    <span class="badge">v4.7.2</span>. Theme adapted from Giulio Fidente on
                    <a
                        href="https://github.com/gfidente/pelican-svbhack"
                        target="_blank"
                        rel="noopener noreferrer"
                        >GitHub</a
                    >.
                    <a href="https://www.sglavoie.com/feeds/sglavoie.rss.xml">RSS feed</a>.
                </p>
            </div>
        </main>
    </body>
</html>